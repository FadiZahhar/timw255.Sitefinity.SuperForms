(function(t,r){LogicalForms=t.LogicalForms||{};LogicalForms=function(){this.switchers=[];this.switches=[];this.validationGroup="";this.oldSubmitOnClick=null};LogicalForms.prototype.run=function(){this.initFields();this.bindChangeEvents();var n=r(".logicalForm input[type=submit]");this.oldSubmitOnClick=n.attr("onclick");n.attr("onclick",null);n.bind("click",r.proxy(this.submit,this))};LogicalForms.prototype.initFields=function(){r(".lf-c,.lf-r").each(function(){r(this).find("input").each(function(){var n=r(this).parent().data("tid");r(this).addClass("lf-field"+n+"_").data("tid",""+n)});r(this).is(".lf-hidden")&&this.hideFields(i)}).removeClass("lf-c lf-r");r(".lf-hidden.lf-required").each(function(){$find(r(this).attr("id"))!=null&&($find(r(this).attr("id"))._validator._required=!1)})};LogicalForms.prototype.bindChangeEvents=function(){for(var i,u,f,t=0;t<this.switchers.length;t++)for(i=this.getField(this.switchers[t]),n=0;n<i.length;n++)u=i[n].type.toLowerCase(),f=u=="radio"||u=="checkbox"?"click":"change",r(i[n]).bind(f,r.proxy(this.checkSwitches,this))};LogicalForms.prototype.checkSwitches=function(n){var f="string"!=typeof n?this.getFieldId(n.target):n,r,t,u,i;for(s=0;s<this.switches.length;s++)if(!(this.switches[s].fields.indexOf(f)<0)){for(r=this.switches[s],t=!1,u=0;u<r.checks.length;u++){if(i=r.checks[u],i.condition=="gt"?t=this.isFieldGreaterThanValue(i.field,i.option):i.condition=="lt"?t=this.isFieldLessThanValue(i.field,i.option):(t=this.isFieldEqualToValue(i.field,i.option),i.condition=="!="&&(t=!t)),r.bool=="AND"&&!t)break;if(r.bool=="OR"&&t)break}t&&"Show"==r.action||!t&&"Hide"==r.action?this.showField(r.target):this.hideField(r.target)}};LogicalForms.prototype.getFieldContainer=function(n){return r(".lf-container-"+n)};LogicalForms.prototype.getFieldId=function(n){return r(n).data("tid")+""};LogicalForms.prototype.getField=function(n){var t=r(".lf-field"+n),i=r(".lf-field"+n+"_");return t.length>0?t:i};LogicalForms.prototype.getFieldValues=function(n){var r=this.getField(n),i=[],t;for(f=0;f<r.length;f++)t=r[f],t.type=="checkbox"||t.type=="radio"?t.checked&&i.push(t.value):i.push(t.value);return i};LogicalForms.prototype.isFieldEqualToOnlyValue=function(n,t){var i=this.getFieldValues(n);return i.length==1&&i.indexOf(t)!=-1};LogicalForms.prototype.isFieldEqualToValue=function(n,t){return this.getFieldValues(n).indexOf(t)!=-1};LogicalForms.prototype.isFieldGreaterThanValue=function(n,t){return parseInt(this.getFieldValues(n)[0])>t};LogicalForms.prototype.isFieldLessThanValue=function(n,t){return parseInt(this.getFieldValues(n)[0])<t};LogicalForms.prototype.showField=function(n){var t=r(this.getFieldContainer(n)),u,i,e;if(t.is(".lf-hidden")){for(u=t.find("input,select,textarea"),f=0;f<u.length;f++)u[f].disabled=!1;for(t.is(".lf-required")&&$find(t.attr("id"))!=null&&($find(t.attr("id"))._validator._required=!0),t.removeClass("lf-hidden"),i=0,e=this.switches.length;i<e;i++)this.switches[i].fields.indexOf(n)<0||this.checkSwitches(n)}};LogicalForms.prototype.hideField=function(n){var t=r(this.getFieldContainer(n)),e,u,i,o,f,s;if(!t.is(".lf-hidden")){for(t.addClass("lf-hidden"),e=t.find("input,select,textarea"),u=0;u<e.length;u++)e[u].disabled=!0;for(t.is(".lf-required")&&$find(t.attr("id"))!=null&&($find(t.attr("id"))._validator._required=!1),i=0,o=this.switches.length;i<o;i++)this.switches[i].fields.indexOf(n)<0||(f=this.switches[i],f.target!=n&&(s=r(this.getFieldContainer(f.target)),s.is(".lf-hidden")||this.hideField(f.target)))}};LogicalForms.prototype.submit=function(){var t=r(".logicalForm .lf-hidden input, .logicalForm .lf-hidden textarea, .logicalForm .lf-hidden select"),i=this,n;return t.each(function(){(this.type=="text"||this.type=="textarea")&&(this.value=this.defaultValue);this.type=="checkbox"&&(this.checked=!1);this.type=="radio"&&(r(this).closest("span").data("defaultvalue")=="True"?r("input:radio[name='"+r(this).attr("name")+"']:first").attr("checked",!0):this.checked=!1);this.type=="select-one"&&r(this).val(r(this).data("defaultvalue"))}),n=Function(this.oldSubmitOnClick),n()};t.LogicalForms=LogicalForms})(window,jQuery);
/*
//# sourceMappingURL=logicalForms.min.js.map
*/